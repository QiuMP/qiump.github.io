---
title: "tcp_wrapper"
date: 2016-07-21
layout: post
categories: 
- 网络
tags: 
- Linux 
- 运维 
- 网络
published: true
comments: 
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. tcp_wrapper</a></li>
<li><a href="#orgheadline4">2. 配置</a>
<ul>
<li><a href="#orgheadline2">配置文件</a></li>
<li><a href="#orgheadline3">配置语法</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
简单介绍了tcp_wrapper以及其配置文件
</p>




<hr  />
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> tcp_wrapper</h2>
<div class="outline-text-2" id="text-1">
<p>
tcp_wrapper对基于tcp协议开发并提供服务的应用程序，提供的一层访问控制工具
</p>
<ul class="org-ul">
<li>基于库调用实现其功能: libwrap，即程序需要调用该库才能支持tcp_wrapper，使用ldd命令进行查询判断</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4"><span class="section-number-2">2</span> 配置</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">配置文件</h3>
<div class="outline-text-3" id="text-orgheadline2">
<ul class="org-ul">
<li>/etc/hosts.allow</li>
<li>/etc/hosts.deny</li>
<li>先检查allow文件后检查deny文件，若都没匹配则允许</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">配置语法</h3>
<div class="outline-text-3" id="text-orgheadline3">
<div class="org-src-container">

<pre class="src src-conf">daemon_list: client_list [:options]
  daemon_list: 
    &#24212;&#29992;&#31243;&#24207;&#30340;&#25991;&#20214;&#21517;&#31216;&#65292;&#32780;&#38750;&#26381;&#21153;&#21517;&#65292;&#21487;&#20351;&#29992;&#20197;&#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;
    ALL: &#25152;&#26377;&#26381;&#21153;

  client_list:
    IP&#22320;&#22336;
    &#20027;&#26426;&#21517;
    &#31616;&#30701;&#26684;&#24335;&#30340;&#32593;&#32476;&#22320;&#22336;&#65292;&#22914;172.16.
    ALL: &#25152;&#26377;&#20027;&#26426;
    EXCEPT: &#19981;&#21305;&#37197;&#20027;&#26426;

vsftpd: 172.16. EXCEPT 172.16.100.0/255.255.255.0 EXCEPT 172.16.100.1  <span style="color: #75715E;"># </span><span style="color: #75715E;">&#19981;&#21253;&#21547;&#38500;172.16.100.1&#22806;&#30340;172.16.100.0&#32593;&#27573;&#30340;IP</span>

  options: 
    deny: &#22312;allow&#25991;&#20214;&#20013;&#20351;&#29992;deny
    allow: &#22312;deny&#25991;&#20214;&#20013;&#20351;&#29992;allow
    spawn: &#21551;&#21160;&#39069;&#22806;&#24212;&#29992;&#31243;&#24207;&#65292;&#24120;&#29992;&#20110;&#35760;&#24405;&#26085;&#24535;

vsftpd: ALL :spawn /bin/echo `date` login attempt from %c to %s, %d &gt;&gt; /var/log/vsftpd.deny.log
  %c: client ip
  %s: server ip
  %d: daemon name
</pre>
</div>
</div>
</div>
</div>
